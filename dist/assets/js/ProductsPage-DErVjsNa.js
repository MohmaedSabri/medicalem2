import{j as e,F as s,m as t,h as a,a4 as r,a5 as l,A as i,H as o,O as n}from"./ui-CYLLpwED.js";import{u as c,d,r as m}from"./router-DYcbc8je.js";import{u as x,k as p,c as g,l as u}from"./index-BKoxOfmY.js";import{g as h,t as b}from"./favorites-CcQ15v0J.js";import{F as y}from"./Footer-BMXQmxLB.js";import{u as f}from"./i18n-BcxKno8E.js";import"./vendor-BfBH_4IJ.js";import"./utils-D9zn5oNC.js";const w=()=>{const w=c(),{t:v}=f(),{currentLanguage:j}=x(),[N,k]=d(),{data:C=[],isLoading:M,error:I}=p(),{categories:L}=g(),{data:S=[]}=u(),[A,B]=m.useState(""),[D,R]=m.useState("All"),[P,F]=m.useState("name"),[H,E]=m.useState("grid"),[_,z]=m.useState(()=>h()),Z=m.useCallback(e=>e?"string"==typeof e?e:"object"==typeof e&&(e[j]||e.en||e.ar)||"":"",[j]),T=m.useCallback(e=>e?Z(e.name):"",[Z]);m.useEffect(()=>{const e=h();z(e)},[]),m.useEffect(()=>{const e=N.get("category"),s=N.get("subcategory");s?R(s):e&&R(e)},[N]),m.useEffect(()=>{if(D&&"All"!==D){const e=N.get("category"),s=N.get("subcategory");if(e||s){const t=s||e,a=(L||[]).find(e=>{const s=e.name;if("object"==typeof s&&s&&"en"in s&&"ar"in s){const e=s;return e.en===t||e.ar===t}return s===t}),r=(S||[]).find(e=>{const s=e.name;if("object"==typeof s&&s&&"en"in s&&"ar"in s){const e=s;return e.en===t||e.ar===t}return s===t});if(a){const e=T(a);R(e)}else if(r){const e=Z(r.name);R(e)}}}},[j,L,S,N,D,T,Z]);const G=e=>{if(R(e),"All"===e)k({});else{const s=(L||[]).some(s=>T(s)===e);(S||[]).some(s=>Z(s.name)===e),k(s?{category:e}:{subcategory:e})}},W=e=>e?"string"==typeof e?e:"object"==typeof e?e[j]||e.en||e.ar||"":String(e):"",$=C.map(e=>{var s,t,a;return{_id:e._id,name:W(e.name),description:W(e.description),longDescription:W(e.longDescription),image:e.image,images:e.images,subcategory:"string"==typeof e.subcategory?e.subcategory:"object"==typeof(null==(s=e.subcategory)?void 0:s.name)?W(null==(t=e.subcategory)?void 0:t.name):(null==(a=e.subcategory)?void 0:a.name)||"Uncategorized",price:e.price,averageRating:e.averageRating||0,totalReviews:e.totalReviews||0,reviews:e.reviews,features:(e.features||[]).map(e=>W(e)),specifications:Object.fromEntries(Object.entries(e.specifications||{}).map(([e,s])=>[e,W(s)])),inStock:e.inStock,stockQuantity:e.stockQuantity,shipping:W(e.shipping),warranty:W(e.warranty),certifications:e.certifications}}),Q=m.useMemo(()=>["All",...(L||[]).map(e=>T(e)).filter(Boolean),...Array.from(new Set($.map(e=>Z(e.subcategory)).filter(Boolean)))].filter((e,s,t)=>t.indexOf(e)===s),[L,$,T,Z]),Y=m.useMemo(()=>{const e=$.filter(e=>{const s=Z(e.name),t=Z(e.description),a=Z(e.subcategory),r=s.toLowerCase().includes(A.toLowerCase())||t.toLowerCase().includes(A.toLowerCase()),l="All"===D||a===D||(L||[]).some(e=>T(e)===D&&(S||[]).some(s=>Z(s.name)===a&&s.parentCategory&&("string"==typeof s.parentCategory?s.parentCategory===e._id:s.parentCategory._id===e._id)));return r&&l});return e.sort((e,s)=>{switch(P){case"price-low":return e.price-s.price;case"price-high":return s.price-e.price;case"rating":return s.averageRating-e.averageRating;default:return Z(e.name).localeCompare(Z(s.name))}}),e},[$,A,D,P,L,S,Z,T]),O=({product:s,index:a})=>{var r;return e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*a},whileHover:{y:-8,scale:1.02},onClick:()=>w(`/product/${s._id}`),className:"bg-white rounded-3xl shadow-xl hover:shadow-2xl overflow-hidden transition-all duration-500 border border-gray-100 cursor-pointer group "+("list"===H?"flex":"flex flex-col min-h-[500px]"),children:[e.jsxs("div",{className:"relative overflow-hidden "+("list"===H?"w-full sm:w-1/3":""),children:[e.jsxs("div",{className:"relative w-full overflow-hidden "+("list"===H?"h-48 sm:h-56":"h-52 sm:h-56"),children:[e.jsx("img",{src:s.image,alt:`${s.name} - Medical equipment`,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",loading:"lazy",onError:e=>{e.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMCAzMEg3MFY3MEgzMFYzMFoiIGZpbGw9IiNEMUQ1REIiLz4KPHBhdGggZD0iTTM1IDM1VjY1SDY1VjM1SDM1WiIgZmlsbD0iI0M3Q0ZEMiIvPgo8L3N2Zz4K"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),e.jsxs("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 flex space-x-2 z-20",children:[e.jsx(t.button,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),(e=>{const s=b(e);z(s)})(s._id)},className:"bg-white/95 backdrop-blur-sm rounded-full p-2 sm:p-2.5 transition-all duration-300 shadow-lg hover:shadow-xl "+(_.includes(s._id)?"text-red-500 hover:bg-red-50":"text-gray-600 hover:bg-red-50 hover:text-red-500"),children:e.jsx(o,{className:"h-3 w-3 sm:h-4 sm:w-4 "+(_.includes(s._id)?"fill-red-500":"")})}),e.jsx(t.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(`/product/${s._id}`),className:"bg-white/95 backdrop-blur-sm rounded-full p-2 sm:p-2.5 hover:bg-blue-50 hover:text-blue-500 transition-all duration-300 shadow-lg hover:shadow-xl text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3 sm:h-4 sm:w-4",children:[e.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),e.jsx("div",{className:"absolute bottom-3 left-3 sm:bottom-4 sm:left-4",children:e.jsx("span",{className:"bg-gradient-to-r from-teal-600 to-emerald-600 backdrop-blur-xl border border-teal-400/50 text-white font-bold px-3 py-1.5 sm:px-4 sm:py-2.5 rounded-full text-xs sm:text-sm shadow-xl shadow-teal-500/25 hover:from-teal-700 hover:to-emerald-700 hover:border-teal-400/70 transition-all duration-300 transform hover:scale-105 drop-shadow-md",children:"string"==typeof s.subcategory?s.subcategory:(null==(r=s.subcategory)?void 0:r.name)||"Uncategorized"})}),e.jsx("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4",children:e.jsxs("span",{className:"bg-white/30 border border-white/30 text-white px-2 py-1 sm:px-3 sm:py-1.5 rounded-full text-xs sm:text-sm font-bold shadow-lg flex items-center space-x-1 sm:space-x-1.5",children:[e.jsx("span",{className:"text-yellow-300 drop-shadow-sm",children:"★"}),e.jsx("span",{className:"font-semibold text-black",children:(()=>{var e;if(void 0!==s.averageRating&&null!==s.averageRating&&s.averageRating>0)return s.averageRating.toFixed(1);if(s.reviews&&s.reviews.length>0)return(s.reviews.reduce((e,s)=>e+s.rating,0)/s.reviews.length).toFixed(1);const t={"2 - Function Manual Bed":4.2,"2 Shelve Dressing /Instrument Trolley":4.5,"2-step step stool":3.8,"3 - Function Manual Bed":4,"4 - Function Manual Bed":4.3,"5 - Function Manual Bed":4.1},a="string"==typeof s.name?s.name:(null==(e=s.name)?void 0:e.en)||"";return t[a]?t[a].toFixed(1):"0.0"})()})]})})]}),e.jsxs("div",{className:("list"===H?"p-6 flex-1":"p-5")+" flex flex-col justify-between",children:[e.jsxs("div",{className:"list"===H?"mb-5":"mb-4",children:[e.jsx("h3",{onClick:()=>w(`/product/${s._id}`),className:("list"===H?"text-lg sm:text-xl":"text-base sm:text-lg lg:text-xl")+" font-bold text-gray-900 leading-tight cursor-pointer hover:text-teal-600 transition-colors duration-300 mb-2",children:Z(s.name)}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-2 mb-4",children:Z(s.description)})]}),e.jsx("div",{className:"list"===H?"mb-4 sm:mb-6":"mb-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 min-h-[2.5rem]",children:[s.features.slice(0,"list"===H?4:2).map((s,t)=>e.jsx("span",{className:"bg-gradient-to-r from-teal-50 to-emerald-50 text-teal-700 px-2 py-1 sm:px-3 sm:py-1.5 rounded-full text-xs font-medium border border-teal-200 hover:from-teal-100 hover:to-emerald-100 transition-all duration-300 shadow-sm",children:Z(s)},t)),s.features.length>("list"===H?4:2)&&e.jsxs("span",{className:"text-gray-500 text-xs font-medium bg-gray-100 px-2 py-1 sm:px-3 sm:py-1.5 rounded-full hover:bg-gray-200 transition-colors duration-300 shadow-sm",children:["+",s.features.length-("list"===H?4:2)," ",v("more")]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold bg-gradient-to-r from-teal-600 to-emerald-600 bg-clip-text text-transparent",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:["ar"===j?e.jsx("span",{children:"د.ا"}):e.jsx("img",{src:"/Dirham%20Currency%20Symbol%20-%20Black.svg",alt:"AED",className:"h-4 w-4"}),e.jsx("span",{children:s.price.toLocaleString()})]})}),e.jsxs(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(`/product/${s._id}`),className:"bg-teal-600 text-white px-3 py-2 sm:px-4 sm:py-2.5 rounded-lg hover:bg-teal-700 transition-all duration-300 flex items-center space-x-1.5 sm:space-x-2 font-semibold shadow-md hover:shadow-lg text-xs sm:text-sm border-0",children:[e.jsx("span",{children:v("details")}),e.jsx(n,{className:"h-3 w-3 sm:h-4 sm:w-4"})]})]}),e.jsx(t.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.98},onClick:e=>{e.stopPropagation(),w(`/contact?productId=${s._id}`)},className:"group relative w-full bg-gray-100 text-gray-700 px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg hover:bg-teal-600 hover:text-white transition-all duration-500 flex items-center justify-center space-x-2 sm:space-x-3 font-semibold border border-gray-200 hover:border-teal-600 overflow-hidden shadow-sm hover:shadow-xl hover:shadow-teal-500/25 holographic-card",children:e.jsxs("div",{className:"relative z-10 flex items-center justify-center space-x-2 sm:space-x-3 w-full",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3 sm:h-4 sm:w-4 transition-all duration-500 group-hover:scale-125 group-hover:rotate-12 flex-shrink-0",children:[e.jsx("circle",{cx:"8",cy:"21",r:"1"}),e.jsx("circle",{cx:"19",cy:"21",r:"1"}),e.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),e.jsx("span",{className:"font-semibold text-xs sm:text-sm transition-all duration-500 group-hover:tracking-wide flex-shrink-0",children:v("contactSales")})]})})]})]})]})};return M?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-b-2 border-teal-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:v("loadingProducts")})]})})}):I?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs("div",{className:"text-center py-16 sm:py-20",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(s,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:v("errorLoadingProducts")}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:v("failedToLoadProducts")}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-teal-600 text-white px-4 py-2.5 sm:px-6 sm:py-3 rounded-lg hover:bg-teal-700 transition-colors text-sm sm:text-base",children:v("retry")})]})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white pt-16 sm:pt-20 lg:pt-24",children:[e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 max-w-7xl",children:[e.jsxs(t.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8 sm:mb-12",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-3 sm:mb-4 leading-tight",children:[v("ourProducts"),e.jsx("span",{className:"block bg-gradient-to-r from-teal-600 to-emerald-600 bg-clip-text text-transparent",children:v("products")})]}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-600 max-w-3xl mx-auto px-4 sm:px-0",children:v("productsDescription")})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"bg-white rounded-xl sm:rounded-2xl shadow-lg p-3 sm:p-4 lg:p-6 mb-6 sm:mb-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:v("searchProducts"),value:A,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:v("category")}),e.jsx("select",{value:D,onChange:e=>G(e.target.value),className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 bg-white text-sm sm:text-base",children:Q.map((s,t)=>e.jsx("option",{value:s,children:s},`category-${t}-${s}`))})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:v("sortBy")}),e.jsxs("select",{value:P,onChange:e=>F(e.target.value),className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-200 rounded-lg sm:rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 bg-white text-sm sm:text-base",children:[e.jsx("option",{value:"name",children:v("sortByName")}),e.jsx("option",{value:"price-low",children:v("sortByPriceLow")}),e.jsx("option",{value:"price-high",children:v("sortByPriceHigh")}),e.jsx("option",{value:"rating",children:v("sortByRating")})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2",children:v("view")}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg sm:rounded-xl p-1 w-full",children:[e.jsxs("button",{onClick:()=>E("grid"),className:"flex-1 px-3 py-2 sm:px-4 sm:py-2 rounded-md sm:rounded-lg transition-all duration-300 flex items-center justify-center space-x-1.5 "+("grid"===H?"bg-white text-teal-600 shadow-md":"text-gray-600 hover:text-gray-900"),children:[e.jsx(r,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:v("grid")})]}),e.jsxs("button",{onClick:()=>E("list"),className:"flex-1 px-3 py-2 sm:px-4 sm:py-2 rounded-md sm:rounded-lg transition-all duration-300 flex items-center justify-center space-x-1.5 "+("list"===H?"bg-white text-teal-600 shadow-md":"text-gray-600 hover:text-gray-900"),children:[e.jsx(l,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:v("list")})]})]})]})]})]})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid"===H?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-1 gap-6",children:e.jsx(i,{children:Y.map((s,t)=>e.jsx(O,{product:s,index:t},s._id))})}),0===Y.length&&e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 sm:py-16",children:[e.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:e.jsx(a,{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2",children:v("noProductsFound")}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 px-4 sm:px-0",children:v("tryAdjustingSearch")}),e.jsx("button",{onClick:()=>{B(""),G("All"),F("name")},className:"bg-teal-600 text-white px-4 py-2.5 sm:px-6 sm:py-3 rounded-lg sm:rounded-xl hover:bg-teal-700 transition-colors duration-300 text-sm sm:text-base",children:v("clearFilters")})]})]}),e.jsx(y,{})]})};export{w as default};
