var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,o=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))l.call(t,s)&&i(e,s,t[s]);return e},n=(e,a)=>t(e,s(a));import{j as c,m as d,B as m,D as x,n as h,F as p,W as g}from"./ui-amuGBMtc.js";import{r as u,L as y}from"./router-DkUHWNsB.js";import{u as b,c as j,d as f,e as v}from"./index-CSO8uAfc.js";import{u as N}from"./i18n-5IHHS4r4.js";import"./vendor-BfBH_4IJ.js";import"./utils-CW8F7fbR.js";const w=()=>{var e;const{t:t}=N(),{currentLanguage:s}=b(),[a,r]=u.useState(1),[l,i]=u.useState({page:1,limit:9,status:void 0,sortBy:"createdAt",sortOrder:"desc"}),{categories:w}=j(),{data:A,isLoading:O}=f(l,s),{data:k=[],isLoading:C}=v(3,s);u.useEffect(()=>{i(e=>n(o({},e),{page:a}))},[a]);const P=(e,t)=>{i(s=>n(o({},s),{sortBy:e,sortOrder:t,page:1})),r(1)},F=()=>{i({page:1,limit:9,status:void 0,sortBy:"createdAt",sortOrder:"desc"}),r(1)},B=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),I=e=>{let t=0;return e.forEach(e=>{if("paragraph"===e.type){const s=e.text.trim().split(/\s+/).length;if(t+=s,e.title){const s=e.title.trim().split(/\s+/).length;t+=s}}}),`${Math.max(1,Math.ceil(t/200))} min read`},S=(e,t=160)=>{const s=e.find(e=>"paragraph"===e.type);if(!s||"paragraph"!==s.type)return"";const a=s.text.trim();if(a.length<=t)return a;const r=a.slice(0,t),l=r.lastIndexOf(" ");return`${r.slice(0,l>0?l:t)}...`},V=e=>{if("string"==typeof e){const t=w.find(t=>t._id===e);return t?"string"==typeof t.name?t.name:t.name&&"object"==typeof t.name?t.name[s]||t.name.en||t.name.ar||"":e:e}return"string"==typeof e.name?e.name:e.name&&"object"==typeof e.name&&(e.name[s]||e.name.en||e.name.ar)||""},_=e=>{var t;const a=e;if(null==(t=a.localized)?void 0:t.title)return a.localized.title;const r=a.title;return"string"==typeof r?r:r&&"object"==typeof r&&(r[s]||r.en||r.ar)||""},z=e=>{var t;const a=e;if(null==(t=a.localized)?void 0:t.content)return a.localized.content;const r=a.content;return Array.isArray(r)?r:r&&"object"==typeof r&&(r[s]||r.en||r.ar)||[]},D=e=>{const t=_(e),s=z(e);return!(!t||!s||0===s.length)&&(!(t.replace(/[^a-zA-Z0-9\u0600-\u06FF\s]/g,"").trim().length<3)&&!!s.some(e=>"paragraph"===e.type&&e.text.replace(/[^a-zA-Z0-9\u0600-\u06FF\s]/g,"").trim().length>=10))},L=(null==(e=null==A?void 0:A.posts)?void 0:e.filter(D))||[],M=k.filter(D);return c.jsxs("div",{className:"min-h-screen bg-white",children:[c.jsxs("section",{className:"relative pt-32 pb-16 bg-[#00796a] overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 -z-20 opacity-20",children:[c.jsx("div",{className:"absolute top-10 left-10 w-8 h-8 border-2 border-white/20 transform rotate-45"}),c.jsx("div",{className:"absolute top-20 right-20 w-6 h-6 border-2 border-white/20 transform rotate-45"}),c.jsx("div",{className:"absolute bottom-20 left-16 w-10 h-10 border-2 border-white/20 transform rotate-45"}),c.jsx("div",{className:"absolute bottom-10 right-10 w-7 h-7 border-2 border-white/20 transform rotate-45"})]}),c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[c.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-6",children:c.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 rounded-full mb-6",children:c.jsx(m,{className:"w-10 h-10 text-white"})})}),c.jsxs(d.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-4xl md:text-6xl font-bold text-white mb-6",children:[t("ourMedical"),c.jsx("span",{className:"block text-yellow-300",children:t("blog")})]}),c.jsx(d.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-teal-100 max-w-3xl mx-auto",children:t("blogDescription")})]})]}),!C&&M.length>0&&c.jsx("section",{className:"py-16",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:t("featuredArticles")}),c.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-teal-500 to-emerald-500 mx-auto"})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:M.map(e=>c.jsxs("article",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[c.jsxs("div",{className:"relative overflow-hidden",children:[c.jsx("img",{src:e.postImage,alt:_(e),className:"w-full h-56 object-cover transition-transform duration-300 hover:scale-105"}),c.jsx("div",{className:"absolute top-3 left-3",children:c.jsx("span",{className:"bg-teal-500 text-white px-2 py-1 rounded-md text-xs font-medium",children:V(e.category)})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[c.jsx("span",{className:"mr-3",children:e.authorName}),c.jsx("span",{className:"mr-3",children:I(z(e))}),c.jsx("span",{children:B(e.createdAt)})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:_(e)}),c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:S(z(e),140)}),c.jsxs(y,{to:`/blog/${e._id}`,className:"inline-flex items-center text-teal-600 hover:text-teal-700 font-medium text-sm transition-colors duration-200 group",children:[t("readArticle"),c.jsx(x,{className:"w-3 h-3 ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})]})]},e._id))})]})}),c.jsx("section",{className:"py-20 bg-gray-50",children:c.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsxs(d.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.1},className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-100",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center",children:c.jsx(h,{className:"w-4 h-4 text-teal-600"})}),c.jsx("span",{children:t("categories")})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:F,className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-300 font-medium "+(l.category?"text-gray-600 hover:bg-gray-50 hover:text-gray-800":"bg-teal-100 text-teal-800 border-2 border-teal-200 shadow-sm"),children:t("allCategories")}),w.map(e=>{return c.jsx("button",{onClick:()=>{return t=e._id,i(e=>n(o({},e),{category:e.category===t?void 0:t,page:1})),void r(1);var t},className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-300 font-medium "+(l.category===e._id?"bg-teal-100 text-teal-800 border-2 border-teal-200 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"),children:(t=e,t?"string"==typeof t.name?t.name:t.name&&"object"==typeof t.name&&(t.name[s]||t.name.en||t.name.ar)||"":"")},e._id);var t})]})]}),c.jsxs(d.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center",children:c.jsx(p,{className:"w-4 h-4 text-teal-600"})}),c.jsx("span",{children:t("sortBy")})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:()=>P("createdAt","desc"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("createdAt"===l.sortBy&&"desc"===l.sortOrder?"bg-teal-100 text-teal-800":"text-gray-600 hover:bg-gray-100"),children:t("newestFirst")}),c.jsx("button",{onClick:()=>P("createdAt","asc"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("createdAt"===l.sortBy&&"asc"===l.sortOrder?"bg-teal-100 text-teal-800":"text-gray-600 hover:bg-gray-100"),children:t("oldestFirst")}),c.jsx("button",{onClick:()=>P("views","desc"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("views"===l.sortBy&&"desc"===l.sortOrder?"bg-teal-100 text-teal-800":"text-gray-600 hover:bg-gray-100"),children:t("mostViewed")}),c.jsx("button",{onClick:()=>P("likes","desc"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("likes"===l.sortBy&&"desc"===l.sortOrder?"bg-teal-100 text-teal-800":"text-gray-600 hover:bg-gray-100"),children:t("mostLiked")})]})]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx(d.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-100",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(p,{className:"w-5 h-5 text-teal-500"}),c.jsxs("span",{className:"text-gray-700",children:[(null==A?void 0:A.totalPosts)||0," posts found"]}),l.category&&c.jsxs("span",{className:"px-3 py-1 bg-teal-100 text-teal-800 text-sm font-medium rounded-full",children:["Category: ",V(l.category)]}),l.status&&c.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:["Status:"," ",l.status.charAt(0).toUpperCase()+l.status.slice(1)]}),l.search&&c.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full",children:["Search: ",l.search]})]}),(l.category||l.status||l.search)&&c.jsx("button",{onClick:F,className:"text-teal-600 hover:text-teal-800 font-medium",children:"Clear Filters"})]})}),O?"":L.length>0?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:t("latestArticles")}),c.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-teal-500 to-emerald-500 mx-auto"})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:L.map(e=>c.jsxs("article",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[c.jsxs("div",{className:"relative overflow-hidden",children:[c.jsx("img",{src:e.postImage,alt:_(e),className:"w-full h-56 object-cover transition-transform duration-300 hover:scale-105"}),c.jsx("div",{className:"absolute top-3 left-3",children:c.jsx("span",{className:"bg-teal-500 text-white px-2 py-1 rounded-md text-xs font-medium",children:V(e.category)})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[c.jsx("span",{className:"mr-3",children:e.authorName}),c.jsx("span",{className:"mr-3",children:I(z(e))}),c.jsx("span",{children:B(e.createdAt)})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:_(e)}),c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:S(z(e),140)}),c.jsxs(y,{to:`/blog/${e._id}`,className:"inline-flex items-center text-teal-600 hover:text-teal-700 font-medium text-sm transition-colors duration-200 group",children:[t("readArticle"),c.jsx(x,{className:"w-3 h-3 ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})]})]},e._id))}),A&&A.totalPages>1&&c.jsxs(d.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"flex items-center justify-center space-x-2 mt-12",children:[c.jsxs("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===a,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[c.jsx(g,{className:"w-4 h-4"}),c.jsx("span",{children:t("previous")})]}),Array.from({length:A.totalPages},(e,t)=>t+1).map(e=>c.jsx("button",{onClick:()=>r(e),className:"px-4 py-2 rounded-lg transition-colors "+(a===e?"bg-teal-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:e},e)),c.jsxs("button",{onClick:()=>r(e=>Math.min(A.totalPages,e+1)),disabled:a===A.totalPages,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 transition-colors",children:[c.jsx("span",{children:t("next")}),c.jsx(x,{className:"w-4 h-4"})]})]})]}):c.jsxs(d.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center py-16",children:[c.jsx("div",{className:"text-gray-400 mb-4",children:c.jsx(m,{className:"w-16 h-16 mx-auto"})}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("noValidPostsFound")}),c.jsx("p",{className:"text-gray-600 mb-4",children:(null==A?void 0:A.posts)&&A.posts.length>0?t("noValidPostsDescription"):t("tryAdjustingSearch")}),(null==A?void 0:A.posts)&&A.posts.length>0&&0===L.length&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsxs("strong",{children:[t("note"),":"]})," ",A.posts.length," ",t("postsFilteredOut")]})})]})]})]})})})]})};export{w as default};
