import{j as e,a as s,Z as t,m as a,D as i,A as r}from"./ui-DppPuMv7.js";import{a as n,r as l}from"./router-DkUHWNsB.js";import{u as c,b as o}from"./index-CRhGRSb9.js";import{g as d,t as m}from"./favorites-CcQ15v0J.js";import"./vendor-BfBH_4IJ.js";import"./utils-DU7KG9CL.js";import"./i18n-5IHHS4r4.js";const x=()=>{const x=n(),{currentLanguage:p}=c(),[h,g]=l.useState(d()),{data:u=[],isLoading:b,error:y}=o(),j=e=>e?"string"==typeof e?e:"object"==typeof e&&(e[p]||e.en||e.ar)||"":"",v=l.useMemo(()=>u.map(e=>{var s;return{_id:e._id,name:j(e.name),description:j(e.description),longDescription:j(e.longDescription),image:e.image,images:e.images,category:"string"==typeof e.subcategory?e.subcategory:j(null==(s=e.subcategory)?void 0:s.name),price:e.price,rating:e.averageRating||0,reviews:e.reviews||[],features:(e.features||[]).map(e=>j(e)),specifications:e.specifications,inStock:e.inStock,stockQuantity:e.stockQuantity,shipping:j(e.shipping),warranty:j(e.warranty),certifications:e.certifications}}),[u,p]);l.useEffect(()=>{const e=()=>{g(d())};return window.addEventListener("storage",e),window.addEventListener("focus",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("focus",e)}},[]);const f=l.useMemo(()=>v.filter(e=>h.includes(e._id)),[v,h]);return l.useEffect(()=>{v.length},[h,v,f]),y?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(s,{className:"w-16 h-16 mx-auto mb-4"})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Error loading products"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Failed to load your favorite products. Please try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors",children:"Retry"})]})})}):b?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-teal-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading favorites..."})]})})}):y?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(t,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Products"}),e.jsx("p",{className:"text-gray-600 mb-4",children:y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors",children:"Retry"})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs(a.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center space-x-3 bg-red-50 px-6 py-3 rounded-full border border-red-200 mb-6",children:[e.jsx(s,{className:"w-8 h-8 text-red-500"}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900",children:"My Favorites"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Your saved medical equipment favorites for easy access and comparison."})]}),0===f.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(s,{className:"w-12 h-12 text-teal-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Browse products and tap the heart to save them here."}),e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x("/products"),className:"inline-flex items-center space-x-2 bg-teal-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-teal-700 transition-colors",children:[e.jsx("span",{children:"Browse Products"}),e.jsx(i,{className:"w-5 h-5"})]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(r,{children:f.map(t=>{return e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover"}),e.jsx("button",{onClick:()=>(e=>{const s=m(e);g(s)})(t._id),className:"absolute top-3 right-3 bg-white/95 backdrop-blur-sm rounded-full p-2.5 transition-all duration-300 shadow-lg "+(h.includes(t._id)?"hover:bg-red-100 text-red-500":"hover:bg-red-50 text-gray-600"),children:e.jsx(s,{className:"h-4 w-4 "+(h.includes(t._id)?"fill-red-500 text-red-500":"")})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-teal-600 font-bold",children:(r=t.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r))}),e.jsxs(a.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>x(`/product/${t._id}`),className:"inline-flex items-center space-x-2 bg-teal-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-teal-700 transition-colors",children:[e.jsx("span",{children:"Details"}),e.jsx(i,{className:"w-4 h-4"})]})]})]})]},t._id);var r})})})]})})};export{x as default};
