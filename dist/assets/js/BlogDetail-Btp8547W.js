var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,l=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&l(e,t,s[t]);if(a)for(var t of a(s))m.call(s,t)&&l(e,t,s[t]);return e},i=(e,a)=>s(e,t(a));import{j as d,B as x,$ as o,m as c,q as h,h as p,U as g,i as b,N as u,e as y,b as j,a0 as N,r as f}from"./ui-CIY3NBJh.js";import{e as w,a as v,r as k,R as P,L as C}from"./router-CimFVjre.js";import{u as S,f as E,g as O,h as A,c as D,i as L,j as z,z as I}from"./index-yL4vxH3D.js";import{u as T}from"./i18n-D3jeVuIW.js";import"./vendor-BfBH_4IJ.js";import"./utils-Bc29Affj.js";const U=()=>{const{t:e}=T(),{currentLanguage:s}=S(),{id:t}=w(),a=v(),{user:r}=E(),[m,l]=k.useState(!1);P.useEffect(()=>{if(!r&&t){const e=JSON.parse(localStorage.getItem("likedPosts")||"[]");l(e.includes(t))}},[r,t]);const{data:U,isLoading:q,error:B}=O(t,s),{mutate:F,isPending:J}=A(),{categories:M}=D(),[$,R]=k.useState(1),[Y,_]=k.useState({authorName:"",authorEmail:"",content:""}),{data:G,isLoading:H}=L(t,$,10),{mutate:K,isPending:Q}=z(),V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),W=e=>{if("string"==typeof e){const t=M.find(s=>s._id===e);return t?"string"==typeof t.name?t.name:t.name&&"object"==typeof t.name?t.name[s]||t.name.en||t.name.ar||"":e:e}return"string"==typeof e.name?e.name:e.name&&"object"==typeof e.name&&(e.name[s]||e.name.en||e.name.ar)||""},X=()=>{var e;if(!U)return"";const t=U;if(null==(e=t.localized)?void 0:e.title)return t.localized.title;const a=t.title;return"string"==typeof a?a:a&&"object"==typeof a&&(a[s]||a.en||a.ar)||""},Z=()=>{var e;if(!U)return[];const t=U;if(null==(e=t.localized)?void 0:e.content)return t.localized.content;const a=t.content;return Array.isArray(a)?a:a&&"object"==typeof a&&(a[s]||a.en||a.ar)||[]};return q?d.jsx("div",{className:"min-h-screen bg-white pt-20 sm:pt-24 md:pt-28 lg:pt-32",children:d.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"max-w-4xl mx-auto",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8 animate-pulse border border-gray-100",children:[d.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 rounded mb-3 sm:mb-4"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded mb-2 w-3/4"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded mb-4 sm:mb-6 w-1/2"}),d.jsx("div",{className:"h-48 sm:h-64 md:h-80 lg:h-96 bg-gradient-to-br from-gray-100 to-gray-200 rounded mb-4 sm:mb-6"}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-5/6"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-4/6"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-3/6"})]})]})})})}):B||!U?d.jsx("div",{className:"min-h-screen bg-white pt-20 sm:pt-24 md:pt-28 lg:pt-32",children:d.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"max-w-4xl mx-auto text-center",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 border border-gray-100",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full mb-3 sm:mb-4",children:d.jsx(x,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600"})}),d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:e("postNotFound")}),d.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:e("postNotFoundDescription")}),d.jsxs(C,{to:"/blog",className:"inline-flex items-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm sm:text-base",children:[d.jsx(o,{className:"w-4 h-4"}),d.jsx("span",{children:e("backToBlog")})]})]})})})}):d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("div",{className:"pt-20 sm:pt-24 md:pt-28 lg:pt-32 pb-4 sm:pb-6 md:pb-8",children:d.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs(c.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},onClick:()=>a("/blog"),className:"inline-flex items-center space-x-2 text-teal-600 hover:text-teal-800 font-medium mb-4 sm:mb-6 transition-colors text-sm sm:text-base",children:[d.jsx(o,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{children:e("backToBlog")})]})})}),d.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-8 sm:pb-12 md:pb-16",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:U.postImage,alt:X(),className:"w-full h-48 sm:h-64 md:h-80 lg:h-96 xl:h-[28rem] object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 via-transparent to-teal-600/20"}),d.jsx("div",{className:"absolute top-2 sm:top-3 md:top-4 left-2 sm:left-3 md:left-4",children:d.jsxs("span",{className:"inline-flex items-center space-x-1 bg-white/95 backdrop-blur-sm text-gray-800 px-2 sm:px-3 md:px-4 py-1 sm:py-1.5 md:py-2 text-xs sm:text-sm font-medium rounded-md sm:rounded-lg border border-white/20 shadow-lg",children:[d.jsx(h,{className:"w-3 h-3 sm:w-4 sm:h-4 text-teal-600"}),d.jsx("span",{className:"hidden xs:inline",children:W(U.category)}),d.jsxs("span",{className:"xs:hidden",children:[W(U.category).substring(0,8),"..."]})]})}),U.featured&&d.jsx("div",{className:"absolute top-2 sm:top-3 md:top-4 right-2 sm:right-3 md:right-4",children:d.jsxs("span",{className:"inline-flex items-center space-x-1 bg-yellow-500 text-white px-2 sm:px-3 md:px-4 py-1 sm:py-1.5 md:py-2 text-xs sm:text-sm font-medium rounded-md sm:rounded-lg shadow-lg",children:[d.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"hidden xs:inline",children:e("featured")}),d.jsx("span",{className:"xs:hidden",children:"â˜…"})]})})]}),d.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[d.jsxs("div",{className:"mb-6 sm:mb-8 bg-white rounded-xl border border-gray-100 p-4 sm:p-6 shadow-sm",children:[d.jsxs("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 mb-3 sm:mb-4 flex items-center space-x-2",children:[d.jsx(g,{className:"w-5 h-5 sm:w-6 sm:h-6 text-teal-600"}),d.jsx("span",{children:e("aboutTheAuthor")})]}),d.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[d.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-teal-100 rounded-full flex items-center justify-center flex-shrink-0",children:d.jsx(g,{className:"w-6 h-6 sm:w-7 sm:h-7 text-teal-600"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h4",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:U.authorName}),d.jsx("p",{className:"text-sm sm:text-base text-gray-600 truncate",children:U.authorEmail})]})]})]}),d.jsxs("header",{className:"mb-6 sm:mb-8",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-3 sm:mb-4 leading-tight",children:X()}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 md:gap-6 text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:[d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5 text-teal-600 flex-shrink-0"}),d.jsx("span",{className:"truncate max-w-[120px] sm:max-w-none",children:U.authorName})]}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5 text-teal-600 flex-shrink-0"}),d.jsx("span",{className:"hidden xs:inline",children:V(U.createdAt)}),d.jsx("span",{className:"xs:hidden",children:new Date(U.createdAt).toLocaleDateString()})]}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx(u,{className:"w-4 h-4 sm:w-5 sm:h-5 text-teal-600 flex-shrink-0"}),d.jsxs("span",{children:[(e=>{let s=0;return e.forEach(e=>{if("paragraph"===e.type){const t=e.text.trim().split(/\s+/).length;if(s+=t,e.title){const t=e.title.trim().split(/\s+/).length;s+=t}}}),Math.ceil(s/200)})(Z())," ",e("minRead")]})]}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx(y,{className:"w-4 h-4 sm:w-5 sm:h-5 text-teal-600 flex-shrink-0"}),d.jsxs("span",{children:[U.views," ",e("views")]})]}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx(j,{className:"w-4 h-4 sm:w-5 sm:h-5 text-teal-600 flex-shrink-0"}),d.jsxs("span",{children:[U.likes," ",e("likes")]})]})]}),U.tags&&U.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2",children:U.tags.map((e,s)=>d.jsxs("span",{className:"px-2 sm:px-3 py-1 bg-teal-100 text-teal-700 text-xs sm:text-sm rounded-full border border-teal-200",children:["#",e]},s))})]}),d.jsx("article",{className:"prose prose-sm sm:prose-base md:prose-lg max-w-none mb-6 sm:mb-8",children:d.jsx("div",{className:"text-gray-700 leading-relaxed text-sm sm:text-base md:text-lg",children:Z().map((e,s)=>d.jsx("div",{className:"mb-4 sm:mb-6",children:"paragraph"===e.type?d.jsxs("div",{children:[e.title&&d.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900 mb-2 sm:mb-3 leading-tight",children:e.title}),d.jsx("p",{className:"leading-relaxed sm:leading-loose",children:e.text})]}):"image"===e.type?d.jsxs("div",{className:"my-4 sm:my-6 md:my-8",children:[d.jsx("img",{src:e.imageUrl,alt:e.imageAlt||"Post image",className:"w-full h-auto rounded-md sm:rounded-lg shadow-lg",loading:"lazy",onError:e=>{e.currentTarget.style.display="none";const s=e.currentTarget.nextElementSibling;s&&(s.style.display="block")},onLoad:()=>{}}),d.jsx("div",{className:"w-full h-32 sm:h-40 md:h-48 bg-gradient-to-br from-gray-50 to-gray-100 rounded-md sm:rounded-lg shadow-lg flex items-center justify-center text-gray-500 border-2 border-dashed border-gray-200",style:{display:"none"},children:d.jsxs("div",{className:"text-center p-2 sm:p-4",children:[d.jsx(h,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 mx-auto mb-2 sm:mb-3 text-gray-400"}),d.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1 sm:mb-2",children:"Image unavailable"}),d.jsx("p",{className:"text-xs text-gray-400 break-all max-w-[200px] sm:max-w-xs",children:e.imageUrl})]})}),e.imageCaption&&d.jsx("p",{className:"text-xs sm:text-sm text-gray-600 italic mt-2 text-center px-2",children:e.imageCaption})]}):null},s))})}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-6 sm:pt-8 border-t border-gray-200",children:[d.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-3 xs:gap-4",children:[d.jsxs("button",{onClick:()=>{if(t)if(r)F(t),l(!0);else{const e=JSON.parse(localStorage.getItem("likedPosts")||"[]");e.includes(t)?I("You have already liked this post!",{icon:"ðŸ’–",style:{background:"#f0f9ff",color:"#0369a1"}}):(e.push(t),localStorage.setItem("likedPosts",JSON.stringify(e)),l(!0),I.success("Post liked! ðŸ’–"))}},disabled:J||!!r&&m,className:`flex items-center justify-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${m?"bg-red-100 text-red-600 border border-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-200"} ${!r&&m?"cursor-default":"cursor-pointer"}`,children:[d.jsx(j,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(m?"fill-current":"")}),d.jsx("span",{children:m?r?e("liked"):"Liked!":e("like")})]}),d.jsxs("button",{onClick:()=>{return e=function*(){if(navigator.share&&U)try{const e=Z().find(e=>"paragraph"===e.type),s=e&&"paragraph"===e.type?e.text.substring(0,100)+"...":"";yield navigator.share({title:X(),text:s,url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href),I.success("Link copied to clipboard!")},new Promise((s,t)=>{var a=s=>{try{m(e.next(s))}catch(a){t(a)}},r=s=>{try{m(e.throw(s))}catch(a){t(a)}},m=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);m((e=e.apply(null,null)).next())});var e},className:"flex items-center justify-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-colors border border-teal-200 text-sm sm:text-base",children:[d.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5"}),d.jsx("span",{children:e("share")})]})]}),d.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-right",children:[e("lastUpdated"),": ",d.jsx("span",{className:"hidden xs:inline",children:V(U.updatedAt)}),d.jsx("span",{className:"xs:hidden",children:new Date(U.updatedAt).toLocaleDateString()})]})]})]})]}),d.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mt-6 sm:mt-8 bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8 border border-gray-100",children:[d.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center space-x-2",children:[d.jsx(f,{className:"w-5 h-5 sm:w-6 sm:h-6 text-teal-600"}),d.jsxs("span",{children:[e("comments")," (",(null==G?void 0:G.totalComments)||0,")"]})]}),d.jsxs("form",{onSubmit:e=>{e.preventDefault(),Y.authorName.trim()&&Y.authorEmail.trim()&&Y.content.trim()&&t&&(K({postId:t,commentData:{authorName:Y.authorName.trim(),authorEmail:Y.authorEmail.trim(),content:Y.content.trim()}}),_({authorName:"",authorEmail:"",content:""}))},className:"mb-6 sm:mb-8 p-4 sm:p-6 bg-gray-50 rounded-xl",children:[d.jsx("h4",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:e("addComment")}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[d.jsx("input",{type:"text",placeholder:e("yourName"),value:Y.authorName,onChange:e=>_(s=>i(n({},s),{authorName:e.target.value})),className:"px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm sm:text-base",required:!0}),d.jsx("input",{type:"email",placeholder:e("yourEmail"),value:Y.authorEmail,onChange:e=>_(s=>i(n({},s),{authorEmail:e.target.value})),className:"px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm sm:text-base",required:!0})]}),d.jsx("textarea",{placeholder:e("writeComment"),value:Y.content,onChange:e=>_(s=>i(n({},s),{content:e.target.value})),rows:3,className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent mb-3 sm:mb-4 text-sm sm:text-base resize-none",required:!0}),d.jsx("button",{type:"submit",disabled:Q,className:"w-full sm:w-auto px-4 sm:px-6 py-2 sm:py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm sm:text-base",children:e(Q?"adding":"addComment")})]}),H?d.jsx("div",{className:"space-y-3 sm:space-y-4",children:Array.from({length:3}).map((e,s)=>d.jsxs("div",{className:"p-3 sm:p-4 bg-gray-50 rounded-lg animate-pulse",children:[d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded mb-2 w-1/3 sm:w-1/4"}),d.jsx("div",{className:"h-2 sm:h-3 bg-gray-200 rounded mb-2 w-1/4 sm:w-1/6"}),d.jsx("div",{className:"h-2 sm:h-3 bg-gray-200 rounded w-2/3 sm:w-3/4"})]},s))}):(null==G?void 0:G.comments)&&G.comments.length>0?d.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[G.comments.map(e=>d.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50 rounded-xl border border-gray-100",children:[d.jsxs("div",{className:"mb-2 sm:mb-3",children:[d.jsx("h5",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:e.authorName}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:V(e.createdAt)})]}),d.jsx("p",{className:"text-gray-700 leading-relaxed text-sm sm:text-base",children:e.content})]},e._id)),G.totalPages>1&&d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-0 sm:space-x-2 pt-4",children:[d.jsx("button",{onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===$,className:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:e("previous")}),d.jsxs("span",{className:"px-3 sm:px-4 py-2 text-gray-600 text-sm sm:text-base",children:[$," / ",G.totalPages]}),d.jsx("button",{onClick:()=>R(e=>Math.min(G.totalPages,e+1)),disabled:$===G.totalPages,className:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:e("next")})]})]}):d.jsxs("div",{className:"text-center py-6 sm:py-8",children:[d.jsx(f,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400 mx-auto mb-3 sm:mb-4"}),d.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:e("noCommentsYet")}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2",children:e("beFirstToComment")})]})]})]})})]})};export{U as default};
