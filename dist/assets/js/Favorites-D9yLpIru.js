import{j as e,H as s,Z as t,m as a,O as i,A as r}from"./ui-CYLLpwED.js";import{u as l,r as n}from"./router-DYcbc8je.js";import{u as o,k as c}from"./index-BKoxOfmY.js";import{g as d,t as m}from"./favorites-CcQ15v0J.js";import{F as x}from"./Footer-BMXQmxLB.js";import{u as p}from"./i18n-BcxKno8E.js";import"./vendor-BfBH_4IJ.js";import"./utils-D9zn5oNC.js";const g=()=>{const g=l(),{currentLanguage:h}=o(),{t:u}=p(),[b,j]=n.useState(d()),{data:y=[],isLoading:v,error:f}=c(),N=n.useCallback(e=>e?"string"==typeof e?e:"object"==typeof e&&(e[h]||e.en||e.ar)||"":"",[h]),w=n.useMemo(()=>y.map(e=>{var s;return{_id:e._id,name:N(e.name),description:N(e.description),longDescription:N(e.longDescription),image:e.image,images:e.images,category:"string"==typeof e.subcategory?e.subcategory:N(null==(s=e.subcategory)?void 0:s.name),price:e.price,rating:e.averageRating||0,reviews:e.reviews||[],features:(e.features||[]).map(e=>N(e)),specifications:e.specifications,inStock:e.inStock,stockQuantity:e.stockQuantity,shipping:N(e.shipping),warranty:N(e.warranty),certifications:e.certifications}}),[y,N]);n.useEffect(()=>{const e=()=>{j(d())};return window.addEventListener("storage",e),window.addEventListener("focus",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("focus",e)}},[]);const k=n.useMemo(()=>w.filter(e=>b.includes(e._id)),[w,b]);return f?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx(s,{className:"w-16 h-16 mx-auto mb-4"})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:u("errorLoadingFavoritesTitle")}),e.jsx("p",{className:"text-gray-600 mb-6",children:u("errorLoadingFavoritesDescription")}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors",children:u("retry")})]})})}):v?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:e.jsx("div",{className:"flex items-center justify-center w-full h-[calc(100vh-6rem)] px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-teal-200 border-t-teal-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:u("loadingFavorites")})]})})}):f?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(t,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u("errorLoadingProducts")}),e.jsx("p",{className:"text-gray-600 mb-4",children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors",children:u("retry")})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20 lg:pt-24",children:[e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs(a.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center space-x-3 bg-red-50 px-6 py-3 rounded-full border border-red-200 mb-6",children:e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900",children:u("favoritesTitle")})}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:u("favoritesSubtitle")})]}),0===k.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx(s,{className:"w-12 h-12 text-teal-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:u("noFavoritesYet")}),e.jsx("p",{className:"text-gray-600 mb-6",children:u("emptyFavoritesHint")}),e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g("/products"),className:"inline-flex items-center space-x-2 bg-teal-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-teal-700 transition-colors",children:[e.jsx("span",{children:u("browseProducts")}),e.jsx(i,{className:"w-5 h-5"})]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(r,{children:k.map(t=>{return e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover"}),e.jsx("button",{onClick:()=>(e=>{const s=m(e);j(s)})(t._id),className:"absolute top-3 right-3 bg-white/95 backdrop-blur-sm rounded-full p-2.5 transition-all duration-300 shadow-lg "+(b.includes(t._id)?"hover:bg-red-100 text-red-500":"hover:bg-red-50 text-gray-600"),children:e.jsx(s,{className:"h-4 w-4 "+(b.includes(t._id)?"fill-red-500 text-red-500":"")})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-teal-600 font-bold",children:(r=t.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r))}),e.jsxs(a.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>g(`/product/${t._id}`),className:"inline-flex items-center space-x-2 bg-teal-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-teal-700 transition-colors",children:[e.jsx("span",{children:u("details")}),e.jsx(i,{className:"w-4 h-4"})]})]})]})]},t._id);var r})})})]}),e.jsx(x,{})]})};export{g as default};
