var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,r,i)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,s=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&o(e,a,s[a]);if(t)for(var a of t(s))i.call(s,a)&&o(e,a,s[a]);return e},a=(e,t,r)=>new Promise((i,o)=>{var s=e=>{try{n(r.next(e))}catch(t){o(t)}},a=e=>{try{n(r.throw(e))}catch(t){o(t)}},n=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);n((r=r.apply(e,t)).next())});import{_ as n}from"./index-yL4vxH3D.js";class l{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const c={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},d=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},m=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=d(e);c.publicKey=r.publicKey,c.blockHeadless=r.blockHeadless,c.storageProvider=r.storageProvider,c.blockList=r.blockList,c.limitRate=r.limitRate,c.origin=r.origin||t},u=(e,t,...r)=>a(null,[e,t,...r],function*(e,t,r={}){const i=yield fetch(c.origin+e,{method:"POST",headers:r,body:t}),o=yield i.text(),s=new l(i.status,o);if(i.ok)return s;throw s}),p=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},h=e=>e.webdriver||!e.languages||0===e.languages.length,b=()=>new l(451,"Unavailable For Headless Browser"),f=(e,t)=>{if((e=>{var t;return!(null==(t=e.list)?void 0:t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const r=(i=t,o=e.watchVariable,i instanceof FormData?i.get(o):i[o]);var i,o;return"string"==typeof r&&e.list.includes(r)},y=()=>new l(403,"Forbidden"),g=(e,t,r)=>a(null,null,function*(){if(!t.throttle||!r)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const i=t.id||e,o=yield((e,t,r)=>a(null,null,function*(){const i=Number((yield r.get(e))||0);return t-Date.now()+i}))(i,t.throttle,r);return o>0||(yield r.set(i,Date.now().toString()),!1)}),v=()=>new l(429,"Too Many Requests"),w=(e,t,r,i)=>a(null,null,function*(){const o=d(i),a=o.publicKey||c.publicKey,n=o.blockHeadless||c.blockHeadless,l=o.storageProvider||c.storageProvider,m=s(s({},c.blockList),o.blockList),w=s(s({},c.limitRate),o.limitRate);if(n&&h(navigator))return Promise.reject(b());if(p(a,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(r),r&&f(m,r))return Promise.reject(y());if(yield g(location.pathname,w,l))return Promise.reject(v());const P={lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:r};return u("/api/v1.0/email/send",JSON.stringify(P),{"Content-type":"application/json"})}),P=(e,t,r,i)=>a(null,null,function*(){const o=d(i),a=o.publicKey||c.publicKey,n=o.blockHeadless||c.blockHeadless,l=c.storageProvider||o.storageProvider,m=s(s({},c.blockList),o.blockList),w=s(s({},c.limitRate),o.limitRate);if(n&&h(navigator))return Promise.reject(b());const P=(e=>"string"==typeof e?document.querySelector(e):e)(r);p(a,e,t),(e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"})(P);const _=new FormData(P);return f(m,_)?Promise.reject(y()):(yield g(location.pathname,w,l))?Promise.reject(v()):(_.append("lib_version","4.4.1"),_.append("service_id",e),_.append("template_id",t),_.append("user_id",a),u("/api/v1.0/email/send-form",_))}),_={init:m,send:w,sendForm:P,EmailJSResponseStatus:l},j=Object.freeze(Object.defineProperty({__proto__:null,EmailJSResponseStatus:l,default:_,init:m,send:w,sendForm:P},Symbol.toStringTag,{value:"Module"})),k={PUBLIC_KEY:"YOUR_PUBLIC_KEY",SERVICE_ID:"YOUR_SERVICE_ID",TEMPLATE_ID:"YOUR_TEMPLATE_ID"},S=()=>{"undefined"!=typeof window&&n(()=>a(null,null,function*(){const{init:e}=yield Promise.resolve().then(()=>j);return{init:e}}),void 0).then(({init:e})=>{e(k.PUBLIC_KEY)})};export{k as E,_ as e,S as i};
